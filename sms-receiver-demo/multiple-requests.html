<!DOCTYPE html>
<meta charset="utf-8">
<title>SMS Receiver API Demo</title>
<head>
  <meta http-equiv="origin-trial" content="AlcXLe43virNo3xGcWDGVFyQO+xys25BsjRHreksq6G1GFoJ6QolEqnGFhhid1R8Wy+eTh+RulNgWDiUm25HTQsAAABXeyJvcmlnaW4iOiJodHRwczovL2F5dWlzaGlpLmdpdGh1Yi5pbzo0NDMiLCJmZWF0dXJlIjoiU21zUmVjZWl2ZXIiLCJleHBpcnkiOjE1NzQ3MTU2MTV9">
</head>
<body>
Trigger multiple requests.

<button onclick="startReceive(count)">Trigger new request</button>
<script>

async function main() {
  if (!navigator.sms) {
    alert("feature not available :(");
    return;
  }
  navigator.sms.receive()
    .then(sms => {
      alert("initial sms received - " + sms.content);
    })
    .catch( e => {
      alert("initial error receive - " + e.name);
    });
}

let count = 1;

function startReceive(num) {
  navigator.sms.receive()
    .then(sms => {
      alert("sms " + num + " received - " + sms.content);
    })
    .catch(e => {
      alert("error " + num + " receive - " + e.name);
    });
  count += 1;
}

main();
</script>
</body>
